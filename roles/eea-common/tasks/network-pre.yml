---
#- name: copy environment for system level proxy setting
#  template: src=environment.j2 dest=/etc/environment mode=644
#  tags: proxy_setting
    
- name: proxy setting via global initialization scripts for each user
  template: src=proxy.sh.j2 dest=/etc/profile.d/proxy.sh mode=644
  tags: proxy_setting

#- name: delete wrong proxy
#  lineinfile:
#     dest: /etc/yum.conf
#     regexp: proxy="http://10.175.250.81:8080"
#     state: absent

- name: yum proxy setting
  lineinfile:
      dest: /etc/yum.conf
      state: present
      backrefs: yes
      line: 'proxy={{ HTTP_PROXY }}'

- name: update /etc/hosts file with other servers
  template: src=hosts.j2 dest=/etc/hosts
  tags: hostfile
 
#- name: update hostname file
#  shell: echo "{{ hostname }}"> /etc/hostname
#
#- name: check hostname
#  command: cat /etc/hostname
#  register: hn
#
#- debug: var=hn.stdout

#- name: set hostname
#  shell: 'hostnamectl --static set-hostname {{ hostname }}'
#  tags: hostname

#- name: set hostname
#  hostname:
#    name: "{{ hostname }}"
#  tags: hostname


